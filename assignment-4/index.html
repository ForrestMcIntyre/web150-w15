<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Assignment 4</title>
</head>
<body>
	This space intentionally left blank
	<script src="http://thomaswilburn.net/scc/data/companies.js"></script>
	<script>
//What's the smallest company (in terms of employee count) on the list?
var smallest = { employees:Infinity };
for(var i = 0; i < companies.length; i++){
	var item = companies[i];
	if (item.employees < smallest.employees){
		smallest = item;
	}
}
console.log("The smallest company was", smallest.company ,"with", smallest.employees ,"employees");

//Several companies lost money this year: they had a negative profit. What were these companies?
var negativeProfit = [];
for(var i = 0; i < companies.length; i++){
	var item = companies[i];
	if (item.profitDelta < 0){
		negativeProfit.push(item);
	}
}
console.log("Companies with negative profit are:", negativeProfit);

//What's the average market cap for companies in the manufacturing sector?
var man = [];
for(var i = 0; i < companies.length; i++){
	var item = companies[i];
	if (item.sector == "manufacturing"){
		man.push(item);
	}
}
var avg = 0;
for(var i = 0; i < man.length; i++){
	avg += man[i].marketCap;
}
console.log("Average market cap for companies in the manufacturing sector is", avg/man.length);
//*Which sector has the highest number of employees? Which has the lowest?
var sectors = {};

for(var i = 0; i < companies.length; i++){
	var item = companies[i];
	var sectorKey = item.sector;
	if(!sectors[sectorKey]){
		sectors[sectorKey] = [];
	}
	sectors[sectorKey].push(item.employees);
}

var highestEmployees = {sector:"", employees:-Infinity};
var lowestEmployees = {sector:"", employees:Infinity};
for (var key in sectors){
	var sumEmployees = 0;
	var item = sectors[key];
	for (var i = 0; i < item.length; i++){
		sumEmployees += item[i];
	}
	if (sumEmployees > highestEmployees.employees){
		highestEmployees.sector = key;
		highestEmployees.employees = sumEmployees;
	}
	if (sumEmployees < lowestEmployees.employees){
		lowestEmployees.sector = key;
		lowestEmployees.employees = sumEmployees;
	}
}
console.log("most employees in sector ", highestEmployees.sector," with ", highestEmployees.employees," employees");
console.log("lowest employees in sector ", lowestEmployees.sector," with ", lowestEmployees.employees," employees");
//*Which company had the highest gain in ranking from the previous year, and which had the highest drop in ranking?

	</script>
</body>
</html>
